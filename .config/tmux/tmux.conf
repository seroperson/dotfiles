set-environment -g TMUX_PLUGIN_MANAGER_PATH '~/.config/tmux/plugin/'
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'fcsonline/tmux-thumbs'

set -g @shell_mode 'vi'

set -g mode-keys vi
# do not notify me about any activity
set -g monitor-activity off
# focus events enabled for terminals that support them
set -g focus-events on
# tmux messages are displayed for 3 seconds
set -g display-time 3000
# address vim mode switching delay
# http://superuser.com/a/252717/65504
set -s escape-time 0
set -g status on
set -g set-titles on
# interval for refreshing statusline
set -g status-interval 5
# start window number counting from 1 (instead of 0)
set -g base-index 1
set -g history-limit 8192
set -g visual-activity on
set -g status-position bottom
# renumber windows when some was deleted
set -g renumber-windows on
# terminal window name
set -g set-titles-string '#{b:pane_current_path}'
# upgrading current terminal
set -g default-terminal "screen-256color"
# no spaces between windows in statusline
set -g window-status-separator ''
# i don't need mouse support
set -g mouse off
# automatically set current window's name to current directory
set -g status-interval 1
set -g automatic-rename on
set -g automatic-rename-format '#(basename "$(git -C #{pane_current_path} rev-parse --show-toplevel 2>/dev/null || echo "#{pane_current_path}")")'

# configuring statusline
set -g @prefix_highlight_fg 'colour234'
set -g @prefix_highlight_bg 'colour12'
set -g status-left ''
set -g status-left-length 100
set -g status-right '#{prefix_highlight}#[fg=white,bg=colour236] #(hostname) #[fg=colour234,bg=colour12] %R ' # date
set -g status-right-length 100
set -g status-bg 'colour234'
set -g window-status-format '#[fg=white] #I #[fg=white] #W ' # inactive tab
set -g window-status-current-format '#[fg=white,bg=colour236] #I #[fg=colour234,bg=colour12] #W ' # current tab

# mapping main thumbs key to 'space'
set -g @thumbs-key space
# displays hint character in square brackets for extra visibility.
set -g @thumbs-contrast 1
# todo: osx-hardcoded
set -g @thumbs-command 'echo -n {} | xclip'
# if enabled allows the content to be copied into the system clipboard
# in addition to the tmux copy buffer
set -g @thumbs-osc52 0
# choose where do you want to show the hint in the matched string
set -g @thumbs-position off_left
# choose if you want to assign the same hint for the same matched strings.
set -g @thumbs-unique 1
# choose which set of characters is used to build hints
# https://github.com/fcsonline/tmux-thumbs#Alphabets
set -g @thumbs-alphabet qwerty-left-hand
set -g @thumbs-regexp-1 '[mM][lL][sS]-[0-9]+' # Match MLS tasks
set -g @thumbs-regexp-2 '[mM][lL][dD]-[0-9]+' # Match MLD tasks
set -g @thumbs-regexp-3 '\.\.\.origin/(.+)' # Match origin destination

# unbinding unused keys
unbind &
unbind .
unbind ,
unbind C-b
unbind C-n
unbind C-p
unbind z
unbind x
unbind c

# prefix is C-t
set -g prefix C-t

# navigating across panes via hjkl
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# resizing panes via shift+hjkl
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# zoom pane
bind e resize-pane -Z

# killing current pane with c-k
bind C-k kill-pane

# new window
bind c new-window

# move window
bind M command-prompt "move-window -t '%%'"

# rename window
bind R command-prompt -I "rename-window #W"

# c-v/c-h to split horizontally/vertically
bind C-v split-window -h -c "#{pane_current_path}"
bind C-h split-window -v -c "#{pane_current_path}"

# n/p to move next/previous
bind n next-window
bind p previous-window

# inner tmux session prefix
bind -n C-a send-prefix

# reload tmux configuration
bind C-e source-file ~/.config/tmux/tmux.conf \; display-message "Reloaded"

run '~/.config/tmux/plugin/tpm/tpm'
